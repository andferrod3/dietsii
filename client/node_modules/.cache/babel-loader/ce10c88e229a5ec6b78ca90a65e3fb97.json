{"ast":null,"code":"var _jsxFileName = \"/Users/andres/Documents/dietsii/client/src/components/auth/Register.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserContext from \"../../context/userContext\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register() {\n  _s();\n\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [passwordCheck, setPasswordCheck] = useState();\n  const [name, setName] = useState();\n  const [surname, setSurname] = useState();\n  const [address, setAddress] = useState();\n  const [phone, setPhone] = useState();\n  const [birth, setBirth] = useState();\n  const [error, setError] = useState();\n  const {\n    setUserData\n  } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      const newUser = {\n        email,\n        password,\n        passwordCheck,\n        surname,\n        name,\n        address,\n        phone,\n        birth\n      };\n      await axios.post(\"http://localhost:5000/users/register\", newUser);\n      const loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\n        email,\n        password\n      });\n      setUserData({\n        token: loginResponse.data.token,\n        user: loginResponse.data.user\n      });\n      localStorage.setItem(\"auth-token\", loginResponse.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Registro\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 1\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorNotice, {\n      message: error,\n      clearError: () => setError(undefined)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nombre: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        onChange: e => setName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Apellidos: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"surname\",\n        onChange: e => setSurname(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Direcci\\xF3n: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"address\",\n        onChange: e => setAddress(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Fecha nacimiento: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        id: \"birth\",\n        onChange: e => setBirth(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Tel\\xE9fono: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"phone\",\n        onChange: e => setPhone(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        id: \"email\",\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Contrase\\xF1a: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Confirma contrase\\xF1a\",\n        onChange: e => setPasswordCheck(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Register\",\n        className: \"btn btn-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 1\n  }, this);\n}\n\n_s(Register, \"afoXNCJUiRF5PNgooOsMPiQkpyU=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/andres/Documents/dietsii/client/src/components/auth/Register.jsx"],"names":["React","useState","useContext","useHistory","axios","UserContext","ErrorNotice","Register","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","name","setName","surname","setSurname","address","setAddress","phone","setPhone","birth","setBirth","error","setError","setUserData","history","submit","e","preventDefault","newUser","post","loginResponse","token","data","user","localStorage","setItem","push","err","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserContext from \"../../context/userContext\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nfunction Register () {\nconst [email, setEmail] = useState();\nconst [password, setPassword] = useState();\nconst [passwordCheck, setPasswordCheck] = useState();\nconst [name, setName] = useState();\nconst [surname, setSurname] = useState();\nconst [address, setAddress] = useState();\nconst [phone, setPhone] = useState();\nconst [birth, setBirth] = useState();\nconst [error, setError] = useState();\nconst { setUserData } = useContext(UserContext);\nconst history = useHistory();\nconst submit = async (e) => {\ne.preventDefault();\ntry{\nconst newUser = {email, password, passwordCheck, surname, name, address, phone, birth};\nawait axios.post(\"http://localhost:5000/users/register\", newUser);\nconst loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\nemail, password, \n});\nsetUserData({\ntoken: loginResponse.data.token,\nuser: loginResponse.data.user\n});\nlocalStorage.setItem(\"auth-token\", loginResponse.data.token);\nhistory.push(\"/\");\n} catch(err) {\nerr.response.data.msg && setError(err.response.data.msg)\n}\n};\nreturn (\n<div className=\"register\">\n<h2>Registro</h2>\n{error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\n<form onSubmit={submit}>\n<label>Nombre: </label>\n<input type=\"text\" id=\"name\" onChange={e => setName(e.target.value)}/>\n<label>Apellidos: </label>\n<input type=\"text\" id=\"surname\" onChange={e => setSurname(e.target.value)}/>\n<label>Dirección: </label>\n<input type=\"text\" id=\"address\" onChange={e => setAddress(e.target.value)}/>\n<label>Fecha nacimiento: </label>\n<input type=\"date\" id=\"birth\" onChange={e => setBirth(e.target.value)}/>\n<label>Teléfono: </label>\n<input type=\"text\" id=\"phone\" onChange={e => setPhone(e.target.value)}/>\n<label>Email: </label>\n<input type=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)}/>\n<label>Contraseña: </label>\n<input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)}/>\n<input type=\"password\" placeholder=\"Confirma contraseña\" onChange={e => setPasswordCheck(e.target.value)}/>\n<input type=\"submit\" value=\"Register\" className=\"btn btn-primary\" />\n</form>\n</div>\n);\n}\nexport default Register;"]},"metadata":{},"sourceType":"module"}