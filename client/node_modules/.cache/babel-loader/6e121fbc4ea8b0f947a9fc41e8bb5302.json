{"ast":null,"code":"var _jsxFileName = \"/Users/andres/Documents/dietsii/client/src/components/auth/Register.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserContext from \"../../context/userContext\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Register() {\n  _s();\n\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [passwordCheck, setPasswordCheck] = useState();\n  const [displayName, setDisplayName] = useState();\n  const [error, setError] = useState();\n  const {\n    setUserData\n  } = useContext(UserContext);\n  const history = useHistory();\n\n  const submit = async e => {\n    e.preventDefault();\n\n    try {\n      const newUser = {\n        email,\n        password,\n        passwordCheck,\n        displayName\n      };\n      await axios.post(\"http://localhost:5000/users/register\", newUser);\n      const loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\n        email,\n        password\n      });\n      setUserData({\n        token: loginResponse.data.token,\n        user: loginResponse.data.user\n      });\n      localStorage.setItem(\"auth-token\", loginResponse.data.token);\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setError(err.response.data.msg);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 1\n    }, this), error && /*#__PURE__*/_jsxDEV(ErrorNotice, {\n      message: error,\n      clearError: () => setError(undefined)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        id: \"email\",\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Confirm password\",\n        onChange: e => setPasswordCheck(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Display name \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"dsplay-name\",\n        onChange: e => setDisplayName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Register\",\n        className: \"btn btn-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 1\n  }, this);\n}\n\n_s(Register, \"NHXDPpDqDJQjGkNkrFcelrmfJfA=\", false, function () {\n  return [useHistory];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/andres/Documents/dietsii/client/src/components/auth/Register.jsx"],"names":["React","useState","useContext","useHistory","axios","UserContext","ErrorNotice","Register","email","setEmail","password","setPassword","passwordCheck","setPasswordCheck","displayName","setDisplayName","error","setError","setUserData","history","submit","e","preventDefault","newUser","post","loginResponse","token","data","user","localStorage","setItem","push","err","response","msg","undefined","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport UserContext from \"../../context/userContext\";\nimport ErrorNotice from \"../../components/misc/ErrorNotice\";\nfunction Register () {\nconst [email, setEmail] = useState();\nconst [password, setPassword] = useState();\nconst [passwordCheck, setPasswordCheck] = useState();\nconst [displayName, setDisplayName] = useState();\nconst [error, setError] = useState();\nconst { setUserData } = useContext(UserContext);\nconst history = useHistory();\nconst submit = async (e) => {\ne.preventDefault();\ntry{\nconst newUser = {email, password, passwordCheck, displayName};\nawait axios.post(\"http://localhost:5000/users/register\", newUser);\nconst loginResponse = await axios.post(\"http://localhost:5000/users/login\", {\nemail, password\n});\nsetUserData({\ntoken: loginResponse.data.token,\nuser: loginResponse.data.user\n});\nlocalStorage.setItem(\"auth-token\", loginResponse.data.token);\nhistory.push(\"/\");\n} catch(err) {\nerr.response.data.msg && setError(err.response.data.msg)\n}\n};\nreturn (\n<div className=\"register\">\n<h2>Register</h2>\n{error && <ErrorNotice message={error} clearError={() => setError(undefined)} />}\n<form onSubmit={submit}>\n<label>Email: </label>\n<input type=\"email\" id=\"email\" onChange={e => setEmail(e.target.value)}/>\n<label>Password: </label>\n<input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)}/>\n<input type=\"password\" placeholder=\"Confirm password\" onChange={e => setPasswordCheck(e.target.value)}/>\n<label>Display name </label>\n<input type=\"text\" id=\"dsplay-name\" onChange={e => setDisplayName(e.target.value)}/>\n<input type=\"submit\" value=\"Register\" className=\"btn btn-primary\" />\n</form>\n</div>\n);\n}\nexport default Register;"]},"metadata":{},"sourceType":"module"}